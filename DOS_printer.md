# M2024打印机打印命令

通过对比ESC/P打印命令得到。

## 机械控制

### 

## 图形命令

### ESC 4 \<n1> \<n2> \<...>

HEX：1B 34 \<n1> \<n2> \<...>

含义：切换到图形模式，打印`(n1*256+n2)*3`个字节的数据。按列打印，每一列24个像素点。后接打印数据，数据中每连续的三个字节，作为一列上的24个像素。例如，第0、1、2个字节表示第0列的24个像素点。

### ESC G \<n1> \<n2> \<...>

HEX：1B 47 \<n1> \<n2> \<...>

含义：同ESC 4 \<n1> \<n2> \<...>。

## 移动命令

### CR

HEX：0D

含义：回车。光标移动到当前行开始处。

> CR并不会换行。这一点和EPSON一致。
>
> CR并不会导致后面紧邻的LF失效。

### LF

HEX：0A

含义：换行，光标移动到下一行。（？）其后面紧邻的CR将被忽略。

> （？）与ESC/P不同之处在于，ESC/P的LF会把光标移动到最左侧行开始处，也就是相当于M2024的CR LF。而M2024的CR和LF与MSDOS屏幕保持一致，CR把光标置到最左，LF移动到下一行。

### FF

HEX：0C

含义：清空缓存，换新页，打印结束。

### ESC J \<n>

HEX：1B 4A \<n>

~~含义：向前进纸。进纸`n+10`个像素点。也就是在180DPI下，进纸`(n+10)/180`英寸。~~

> ~~似乎M2024在进纸时打印头会随纸张移动，保持相对位置不变。因为WPS打印时EPSON采用 ESC J 18H CR来换空行，而M2024 需要ESC J 12H CR LF。也就是M2024在进纸后又进行了LF换行操作，但EPSON只需要进纸。同时UCWORD打印时采用ESC 3 1CH LF，也就是先设置行距再换行就可以移动纸张；M2024则采用ESC J 12H LF，也就是先进纸再换行。~~

含义：设置行距（同EPSON的ESC 3）。n为10H等价于一行（24点）的垂直长度。也即设置行距为`n*3/2`个像素点。也可能是小于24就设置为24。

# STAR AR2463打印机控制命令

## 机械控制

### ESC \>

HEX：1B 3E

含义：设置单向打印。

### ESC ]

HEX：1B 5D

含义：设置双向打印。

## 图形命令

### ESC J \<n1> \<n2> \<n3> \<n4> \<...>

HEX：1B 4A \<n1> \<n2> \<n3> \<n4>

含义：设置图形模式，打印`(chr(n1)*1000+chr(n2)*100+chr(n3)*10+chr(n4))*3`个字节的像素数据，同样以24个bit（3个字节）为一列，与点阵打印模式相同。chr()指将十六进制数转为ASCII字符。

### SUB \<n>

HEX：1A \<n>

含义：设置像素排列顺序，\<n>为：

* 46

  MSB为高位置像素。（符合EPSON模式）

* 47

  MSB为低位置像素。（与EPSON相反）

（?）默认\<n>为46。但是连续三个字节按顺序依然是高、中、低段。也就是若\<n>为47，在用EPSON的处理程序处理时需要额外对每个字节都进行比特反序，eg. 1100 1010变为0101 0011。

## 移动命令

### CR

HEX：0D

含义：回车。光标移动到当前行开始处。

> CR并不会换行。这一点和EPSON一致。
>
> CR并不会导致后面紧邻的LF失效。

### LF

HEX：0A

含义：换行，光标移动到下一行。

### FF

HEX：0C

含义：结束当前页。

### ESC T \<n1> \<n2>

HEX：1B 54 \<n1> \<n2>

含义：指定行距。同样是把参数作为字符，然后组成数字。例如32H 38H转到ASCII码为2 8，那么行距就是28。若行距小于24，则设为24。n1、n2均为大于等于'0'的数。

### ESC T \<n1>

HEX：1B 54 \<n1>

含义：进纸`n1/3*2`个像素。n1为小于'0'的数字。

# OKI8320 打印机指令



## 机械命令

### ESC % B

HEX：1B 25 42

含义：设置双向打印。

### ESC % U

HEX：1B 25 42

含义：设置单向打印。

可能有换新页的作用。

## 图形命令

### ESC % 1 \<n1> \<n2> \<...>

HEX：1B 25 31 \<n1> \<n2> \<...>

含义：切换到图形模式，打印`(n1*256+n2)*3`个字节的数据。按列打印，每一列24个像素点。后接打印数据，数据中每连续的三个字节，作为一列上的24个像素。例如，第0、1、2个字节表示第0列的24个像素点。

## 移动命令

### CR

HEX：0D

含义：回车。光标移动到当前行开始处。

> CR并不会换行。这一点和EPSON一致。
>
> CR并不会导致后面紧邻的LF失效。

### LF

HEX：0A

含义：换行，光标移动到下一行。

### FF

HEX：0C

含义：结束当前页。

### ESC % 9 \<n1> \<n2>

HEX：1B 25 39 \<n1> \<n2>

含义：（？）设置行距为`(n1*256+n2)*3/2`。可能结果小于24会置为24。反正00H 10H对应24点。

UCWORD：

| EPSON | OKI8320 |
| ----- | ------- |
| 1CH   | 00H 12H |
| 1EH   | 00H 14H |

CCED:

| EPSON | OKI8320 |
| ----- | ------- |
| 04H   | 00H 02H |
| 05H   | 00H 04H |

总之行距计算与M2024近似。



## PUBMAN特征

其他情况：0C指令换页

允许自动换页、打印驱动程序换页AE+DE+：设置大行距并大量LF换页，会导致问题



